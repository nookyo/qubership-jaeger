name: Debug GHCR Packages

on:
  workflow_dispatch:

jobs:
  debug-packages:
    runs-on: ubuntu-latest
    permissions:
      packages: read

    steps:
      - name: Show raw GHCR response
        env:
          GH_TOKEN: ${{ secrets.GH_PAT_PACKAGES }}
          OWNER: ${{ github.repository_owner }}
        run: |
          api_url="https://api.github.com/users/${OWNER}/packages?package_type=container"
          echo "Request: $api_url"

          response=$(curl -sS \
            -H "Authorization: Bearer $GH_TOKEN" \
            -H "Accept: application/vnd.github+json" \
            "$api_url")

            echo "Raw response:"
            echo "$response" | 'jq . [] | .name'

       #     echo "$response" | jq .
